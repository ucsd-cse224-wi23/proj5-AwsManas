rm -rf ./test/_bin
GOBIN="/Users/manas/Desktop/UCSD - Classes /Winter 23/CSE 224/proj5-AwsManas"/test/_bin go get github.com/mattn/go-sqlite3
GOBIN="/Users/manas/Desktop/UCSD - Classes /Winter 23/CSE 224/proj5-AwsManas"/test/_bin go install ./...
go test -v -run TestSyncTwoClientsSameFileLeaderFailure -count=1 ./test/...
=== RUN   TestSyncTwoClientsSameFileLeaderFailure
    raft_client_test.go:12: client1 syncs with file1. client2 syncs with file1 (different content). client1 syncs again.
Sending heartbeat from  0
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  1  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
Got sucess heartbeat response from  :  1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  3 responses
Sending heartbeat from  0
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  1  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
Got sucess heartbeat response from  :  1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  3 responses
2023/03/17 14:24:34 Client syncing with  {[localhost:9007 localhost:9008 localhost:9009] [localhost:8080 localhost:8081]} test0 1024
Client sync started - Scanning the base directory 
All files scanned , got :  [multi_file1.txt]
GetBlockStoreAddrs in loop 0
In GetBlockStoreAddrs : serverID :  0 Leader , Crashed :  true false
Sending heartbeat from  0
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  1  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
Got sucess heartbeat response from  :  1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  3 responses
getBlockStoreAddrs : got suc as  true
Executing GetBlockStoreAddrs  got : [localhost:8080 localhost:8081]
local--------BEGIN PRINT MAP--------
---------END PRINT MAP--------
New files in local :  [multi_file1.txt]
Changed files in local :  []
Deleted file list :  []
In GetFileInfoMap : serverID :  0 Leader , Crashed :  true false
Sending heartbeat from  0
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  1  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
Got sucess heartbeat response from  :  1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  3 responses
getFileInfoMap : got suc as  true
Executing GetFileInfoMap  got : map[]
remote--------BEGIN PRINT MAP--------
---------END PRINT MAP--------
local--------BEGIN PRINT MAP--------
---------END PRINT MAP--------
All best files :  [multi_file1.txt]
New files in local :  [multi_file1.txt]
Changed files in local : []
Total lines :  3
In GetBlockStoreMap : serverID :  0 Leader , Crashed :  true false
Sending heartbeat from  0
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 -1 0 [] -1} []
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  1  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  0 -1 1
Got sucess heartbeat response from  :  2
Got sucess heartbeat response from  :  1
Finished sending heartbeat - got  3 responses
getBlockStoreMap : got suc as  true
Executing GetBlockStoreMap  got : map[localhost:8081:hashes:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"]
Get block addr map :  map[localhost:8081:[9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628]]
Returning this as address :  localhost:8081
Putting data in blockstore :  [70 105 108 101 32 99 114 101 97 116 101 100 32 98 121 32 99 108 105 101 110 116 32 49 46 32 84 104 105 115 32 105 115 32 99 108 105 101 110 116 32 49 39 115 32 102 105 108 101 46]
In UpdateFile : serverID :  0 Leader , Crashed :  true false
In UpdateFile , updated log is  : serverID :  0 [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
In UpdateFile , updated log lenght  for serverID : is  0 1
logIndexMinus :  1 0
logIndexMinus :  2 0
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 1
IAM  1  Before returning sucess here's my values : len(log), commit_idx , term  1 -1 1
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 -1 -1 1
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 -1 1
UpdateFile - Update sucessfull for :  1 in  0
UpdateFile - Update sucessfull for :  2 in  0
Got majority , applying operation is local 
Deleted file list :  []
Sending heartbeat from  0
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 1 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
Applying updatefile for server  2
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 1
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
Applying updatefile for server  1
IAM  1  Before returning sucess here's my values : len(log), commit_idx , term  1 0 1
Got sucess heartbeat response from  :  2
Got sucess heartbeat response from  :  1
Finished sending heartbeat - got  3 responses
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got sucess heartbeat response from  :  2
Got a negetive herbeat response from :  -1
Finished sending heartbeat - got  2 responses
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got sucess heartbeat response from  :  2
Got a negetive herbeat response from :  -1
Finished sending heartbeat - got  2 responses
2023/03/17 14:24:34 Client syncing with  {[localhost:9007 localhost:9008 localhost:9009] [localhost:8080 localhost:8081]} test1 1024
Client sync started - Scanning the base directory 
All files scanned , got :  [multi_file1.txt]
GetBlockStoreAddrs in loop 0
In GetBlockStoreAddrs : serverID :  0 Leader , Crashed :  true true
GetBlockStoreAddrs in loop 1
In GetBlockStoreAddrs : serverID :  1 Leader , Crashed :  true false
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got sucess heartbeat response from  :  2
Got a negetive herbeat response from :  -1
Finished sending heartbeat - got  2 responses
getBlockStoreAddrs : got suc as  true
Executing GetBlockStoreAddrs  got : [localhost:8080 localhost:8081]
local--------BEGIN PRINT MAP--------
---------END PRINT MAP--------
New files in local :  [multi_file1.txt]
Changed files in local :  []
Deleted file list :  []
In GetFileInfoMap : serverID :  0 Leader , Crashed :  true true
In GetFileInfoMap : serverID :  1 Leader , Crashed :  true false
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got sucess heartbeat response from  :  2
Got a negetive herbeat response from :  -1
Finished sending heartbeat - got  2 responses
getFileInfoMap : got suc as  true
Executing GetFileInfoMap  got : map[multi_file1.txt:filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"]
remote--------BEGIN PRINT MAP--------
	 multi_file1.txt 1
	 9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628
---------END PRINT MAP--------
Downloading file :  multi_file1.txt  from remote
Total lines :  3
In GetBlockStoreMap : serverID :  0 Leader , Crashed :  true true
In GetBlockStoreMap : serverID :  1 Leader , Crashed :  true false
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got sucess heartbeat response from  :  2
Got a negetive herbeat response from :  -1
Finished sending heartbeat - got  2 responses
getBlockStoreMap : got suc as  true
Executing GetBlockStoreMap  got : map[localhost:8081:hashes:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"]
Returning this as address :  localhost:8081
Reconstructing file in local
local--------BEGIN PRINT MAP--------
	 multi_file1.txt 1
	 9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628
---------END PRINT MAP--------
All best files :  []
New files in local :  []
Changed files in local : []
Deleted file list :  []
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got a negetive herbeat response from :  -1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  2 responses
2023/03/17 14:24:34 Client syncing with  {[localhost:9007 localhost:9008 localhost:9009] [localhost:8080 localhost:8081]} test0 1024
Client sync started - Scanning the base directory 
All files scanned , got :  [index.db multi_file1.txt]
GetBlockStoreAddrs in loop 0
In GetBlockStoreAddrs : serverID :  0 Leader , Crashed :  true true
GetBlockStoreAddrs in loop 1
In GetBlockStoreAddrs : serverID :  1 Leader , Crashed :  true false
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
Got a negetive herbeat response from :  -1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  2 responses
getBlockStoreAddrs : got suc as  true
Executing GetBlockStoreAddrs  got : [localhost:8080 localhost:8081]
local--------BEGIN PRINT MAP--------
	 multi_file1.txt 1
	 9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628
---------END PRINT MAP--------
New files in local :  []
Changed files in local :  []
Deleted file list :  []
In GetFileInfoMap : serverID :  0 Leader , Crashed :  true true
In GetFileInfoMap : serverID :  1 Leader , Crashed :  true false
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got a negetive herbeat response from :  -1
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  2 responses
getFileInfoMap : got suc as  true
Executing GetFileInfoMap  got : map[multi_file1.txt:filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"]
remote--------BEGIN PRINT MAP--------
	 multi_file1.txt 1
	 9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628
---------END PRINT MAP--------
local--------BEGIN PRINT MAP--------
	 multi_file1.txt 1
	 9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628
---------END PRINT MAP--------
All best files :  []
New files in local :  []
Changed files in local : []
Deleted file list :  []
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
Got sucess heartbeat response from  :  2
Got a negetive herbeat response from :  -1
Finished sending heartbeat - got  2 responses
Sending heartbeat from  1
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
Sending This to follower :  {{{} [] [] <nil>} 0 [] 2 0 1 [] 0} [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM  2  Before returning sucess here's my values : len(log), commit_idx , term  1 0 2
Got a negetive herbeat response from :  -1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  2 responses
--- PASS: TestSyncTwoClientsSameFileLeaderFailure (2.44s)
PASS
ok  	cse224/proj5/test	2.698s
