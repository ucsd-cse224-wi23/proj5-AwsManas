rm -rf ./test/_bin
GOBIN="/Users/manas/Desktop/UCSD - Classes /Winter 23/CSE 224/proj5-AwsManas"/test/_bin go get github.com/mattn/go-sqlite3
GOBIN="/Users/manas/Desktop/UCSD - Classes /Winter 23/CSE 224/proj5-AwsManas"/test/_bin go install ./...
go test -v -run TestSyncTwoClientsSameFileLeaderFailure -count=1 ./test/...
=== RUN   TestSyncTwoClientsSameFileLeaderFailure
    raft_client_test.go:12: client1 syncs with file1. client2 syncs with file1 (different content). client1 syncs again.
Sending heartbeat from  0
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
Got sucess heartbeat response from  :  1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  3 responses
Sending heartbeat from  0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
Got sucess heartbeat response from  :  2
Got sucess heartbeat response from  :  1
Finished sending heartbeat - got  3 responses
2023/03/16 12:42:22 Client syncing with  {[localhost:9007 localhost:9008 localhost:9009] [localhost:8080 localhost:8081]} test0 1024
GetBlockStoreAddrs in loop 0
In GetBlockStoreAddrs : serverID :  0 Leader , Crashed :  true false
Sending heartbeat from  0
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
Got sucess heartbeat response from  :  1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  3 responses
getBlockStoreAddrs : got suc as  true
In GetFileInfoMap : serverID :  0 Leader , Crashed :  true false
Sending heartbeat from  0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
Got sucess heartbeat response from  :  2
Got sucess heartbeat response from  :  1
Finished sending heartbeat - got  3 responses
getFileInfoMap : got suc as  true
Total lines :  3
In GetBlockStoreMap : serverID :  0 Leader , Crashed :  true false
Sending heartbeat from  0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 0
Got sucess heartbeat response from  :  2
Got sucess heartbeat response from  :  1
Finished sending heartbeat - got  3 responses
getBlockStoreMap : got suc as  true
here - no error0x14000305830Get block addr map :  map[localhost:8081:[9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628]]
Returning this as address :  localhost:8081
In UpdateFile : serverID :  0 Leader , Crashed :  true false
In UpdateFile , updated log is  : serverID :  0 [term:1  fileMetaData:{filename:"multi_file1.txt"  version:1  blockHashList:"9193460d4355655100cced0da2455725954377e10edfa83f18d347a10e2e2628"}]
In UpdateFile , updated log lenght  for serverID : is  0 1
logIndexMinus :  1 0
logIndexMinus :  2 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 1
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 0 0 1
UpdateFile - Update sucessfull for :  2 in  0
UpdateFile - Update sucessfull for :  1 in  0
Got majority , applying operation is local 
Hereee-----
Sending heartbeat from  0
IAM 1 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 1 0 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   1 1 0 0
Got sucess heartbeat response from  :  1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  3 responses
Sending heartbeat from  1
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got sucess heartbeat response from  :  2
Got a negetive herbeat response from :  -1
Finished sending heartbeat - got  2 responses
Sending heartbeat from  1
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got sucess heartbeat response from  :  2
Got a negetive herbeat response from :  -1
Finished sending heartbeat - got  2 responses
2023/03/16 12:42:22 Client syncing with  {[localhost:9007 localhost:9008 localhost:9009] [localhost:8080 localhost:8081]} test1 1024
GetBlockStoreAddrs in loop 0
In GetBlockStoreAddrs : serverID :  0 Leader , Crashed :  true true
GetBlockStoreAddrs in loop 1
In GetBlockStoreAddrs : serverID :  1 Leader , Crashed :  true false
Sending heartbeat from  1
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got a negetive herbeat response from :  -1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  2 responses
getBlockStoreAddrs : got suc as  true
In GetFileInfoMap : serverID :  0 Leader , Crashed :  true true
In GetFileInfoMap : serverID :  1 Leader , Crashed :  true false
Sending heartbeat from  1
IAM 0 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
IAM 2 Reacieved a appendEntry call with values : Term , LeaderCommit , PrevLogidx , len of entries :   2 0 0 0
Got a negetive herbeat response from :  -1
Got sucess heartbeat response from  :  2
Finished sending heartbeat - got  2 responses
getFileInfoMap : got suc as  true
Total lines :  3
In GetBlockStoreMap : serverID :  0 Leader , Crashed :  true true
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x2 addr=0x18 pc=0x1031f5248]

goroutine 1 [running]:
cse224/proj5/pkg/surfstore.(*RPCClient).GetBlockStoreMap(0x14000221dc8, {0x140002926e0, 0x1, 0x1}, 0x14000221630)
	/Users/manas/Desktop/UCSD - Classes /Winter 23/CSE 224/proj5-AwsManas/pkg/surfstore/SurfstoreRPCClient.go:173 +0x218
cse224/proj5/pkg/surfstore.ClientSync({{0x140001c6a00, 0x3, 0x4}, {0x16cfa33c6, 0x5}, 0x400})
	/Users/manas/Desktop/UCSD - Classes /Winter 23/CSE 224/proj5-AwsManas/pkg/surfstore/SurfstoreUtils.go:103 +0xa68
main.main()
	/Users/manas/Desktop/UCSD - Classes /Winter 23/CSE 224/proj5-AwsManas/cmd/SurfstoreClientExec/main.go:75 +0x364
    raft_client_test.go:55: Sync failed
--- FAIL: TestSyncTwoClientsSameFileLeaderFailure (2.42s)
FAIL
FAIL	cse224/proj5/test	2.697s
FAIL
